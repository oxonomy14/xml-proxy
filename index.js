/* empty css                      */(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();let u=[];fetch("/xml-proxy/data/users.json").then(e=>{if(!e.ok)throw new Error(`Ошибка загрузки: ${e.status}`);return e.json()}).then(e=>{u=e}).catch(e=>console.error(e));const m="feedback-form-state",s={form:document.querySelector(".feedback-form"),container:document.querySelector(".feedback-message"),title:document.querySelector(".sub-title"),result:document.querySelector(".text-1"),text2:document.querySelector(".text-2"),text3:document.querySelector(".text-3")};//! Парсим xml обменника
let l=null;fetch("/xml-proxy/data/exprates.xml").then(e=>e.text()).then(e=>{const t=new DOMParser().parseFromString(e,"application/xml"),a="SBERRUB",r="WIRETHB",o=Array.from(t.querySelectorAll("item")).find(c=>c.querySelector("from").textContent===a&&c.querySelector("to").textContent===r);if(o){let c=o.querySelector("out").textContent,d=o.querySelector("in").textContent;l=(c/d).toFixed(4),console.log(`Курс ${a} → ${r}: ${l}`)}else console.log("Курс не найден")}).catch(e=>console.error("Ошибка загрузки XML:",e));//! Сохраняем значения в localStorage
s.form.addEventListener("input",e=>{const t={email:e.currentTarget.elements.email.value};h(m,t)});g();//!  Загружаем данные из localStorage
function g(){const e=S(m);s.form.elements.email.value=(e==null?void 0:e.email)||""}//! Текущая дата
const i=new Date,p=String(i.getDate()).padStart(2,"0"),x=String(i.getMonth()+1).padStart(2,"0"),y=i.getFullYear(),f=`${p}.${x}.${y}`;console.log(f);//!  submit - выводим информацию
s.form.addEventListener("submit",e=>{if(e.preventDefault(),!e.currentTarget.elements.email.value){alert("Заполните поле Email для идентификации Вас");return}const n=e.currentTarget.elements.email.value.trim().toLowerCase(),t=u.find(a=>a.email.toLowerCase()===n);t?(s.title.textContent=`${t.username}, ${t.titleCourse}`,s.result.textContent=`<strong>Стоимость сессии ${t.price} Бат</strong>, что на сегодня ${f} по текущему курсу обменника vipChanger <strong>1 руб = ${l} Бат</strong> составляет: <strong>${Math.floor(t.price/l)} руб.</strong>`,s.text3.textContent=`Куратор: ${t.teacher}`,t.opt!==""?s.text2.textContent=`Стоимость ${t.opt}-x занятий составит - <strong>${Math.floor(t.priceOpt/l*t.opt)} руб.</strong>`:s.text2.textContent=""):s.result.textContent="Такой электронной почты нет в списке",s.form.reset()});//! функция для LocalStorage
function h(e,n){const t=JSON.stringify(n);localStorage.setItem(e,t)}function S(e){const n=localStorage.getItem(e);try{return JSON.parse(n)}catch{return n}}
//# sourceMappingURL=index.js.map
